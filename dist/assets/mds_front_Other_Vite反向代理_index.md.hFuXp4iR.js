import{_ as a,c as s,o as n,U as e}from"./chunks/framework.hWf9kaa6.js";const _=JSON.parse('{"title":"OpenaiProxy代理转发","description":"","frontmatter":{"title":"OpenaiProxy代理转发","date":"2023-12-07","categories":["后端"]},"headers":[],"relativePath":"mds/front/Other/Vite反向代理/index.md","filePath":"mds/front/Other/Vite反向代理/index.md","lastUpdated":1704782344000}'),p={name:"mds/front/Other/Vite反向代理/index.md"},t=e(`<p>在国内你要访问openai的接口，你是访问不了的。</p><p>为了给自己或者公司提供openai的服务，就需要做一些代理转发的功能。</p><p>以前通常是使用nginx作为代理转发，但是nginx是反向代理，服务器配置也难配，要配置流，要配置SSL证书，贼麻烦。</p><p>自己是前端开发，突然到Vite具有转发的功能，devServer。我就在想devServer能不能行呢。没想到居然很完美。很完美。</p><p>以后我就可以用这种方式代理**<em>所有</em>**国外的接口。</p><h2 id="_1-国外的服务器" tabindex="-1">1.国外的服务器 <a class="header-anchor" href="#_1-国外的服务器" aria-label="Permalink to &quot;1.国外的服务器&quot;">​</a></h2><p>需要一个国外的服务器，香港啥的都行</p><h2 id="_2-创建一个vite项目-前端经验" tabindex="-1">2.创建一个Vite项目（前端经验） <a class="header-anchor" href="#_2-创建一个vite项目-前端经验" aria-label="Permalink to &quot;2.创建一个Vite项目（前端经验）&quot;">​</a></h2><p>创建一个Vite项目，配置devServer</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>import { defineConfig } from &#39;vite&#39;</span></span>
<span class="line"><span>import vue from &#39;@vitejs/plugin-vue&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// https://vitejs.dev/config/</span></span>
<span class="line"><span>export default defineConfig({</span></span>
<span class="line"><span>    plugins: [vue()],</span></span>
<span class="line"><span>    server: {</span></span>
<span class="line"><span>        host: &quot;0.0.0.0&quot;,</span></span>
<span class="line"><span>        port: 80,</span></span>
<span class="line"><span>        proxy: {</span></span>
<span class="line"><span>            &#39;/v1&#39;: {</span></span>
<span class="line"><span>                target: &#39;https://api.openai.com/v1&#39;,</span></span>
<span class="line"><span>                changeOrigin: true,</span></span>
<span class="line"><span>                rewrite: (path) =&gt; path.replace(/^\\/v1/, &#39;&#39;),</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>})</span></span></code></pre></div><h2 id="_3-访问你自己的80端口就行了-当然端口可以修改。" tabindex="-1">3.访问你自己的80端口就行了，当然端口可以修改。 <a class="header-anchor" href="#_3-访问你自己的80端口就行了-当然端口可以修改。" aria-label="Permalink to &quot;3.访问你自己的80端口就行了，当然端口可以修改。&quot;">​</a></h2><p>我没有测试过Vite代理转发的性能怎么样。如果遇到性能瓶颈可以多开几个做集群部署，然后使用Nginx作为网关，负载均衡就行了。</p><p>最后我想说一句尤雨溪，YYDS！</p><h2 id="_4-镜像" tabindex="-1">4.镜像 <a class="header-anchor" href="#_4-镜像" aria-label="Permalink to &quot;4.镜像&quot;">​</a></h2><p>当然我也做好了镜像，你直接在你的服务器上安装docker，然后使用docker运行以下命令</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docker run -dit --restart=always --name openai-proxy -p 9008:80 difffffft/openai-proxy:latest</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>client = OpenAI(api_key=CONFIG[&#39;APP&#39;][&#39;OPENAI&#39;][&#39;KEY&#39;], base_url=&#39;http://xxx.xxx.xxx.xx:9008/v1&#39;)</span></span></code></pre></div><h2 id="_5-开源" tabindex="-1">5.开源 <a class="header-anchor" href="#_5-开源" aria-label="Permalink to &quot;5.开源&quot;">​</a></h2><p>感谢大佬们来个star，说实话没啥技术含量，但是思路很清奇，哈哈。</p><p><a href="https://github.com/difffffft/openai-proxy" target="_blank" rel="noreferrer">difffffft/openai-proxy: openai-proxy (github.com)</a></p>`,20),i=[t];function l(o,r,c,d,h,f){return n(),s("div",null,i)}const v=a(p,[["render",l]]);export{_ as __pageData,v as default};
