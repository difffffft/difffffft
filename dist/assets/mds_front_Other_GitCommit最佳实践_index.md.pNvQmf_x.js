import{_ as s,c as a,o as n,U as e}from"./chunks/framework.hWf9kaa6.js";const u=JSON.parse('{"title":"git commit最佳实践","description":"","frontmatter":{"title":"git commit最佳实践","date":"2023-12-04","categories":["前端"]},"headers":[],"relativePath":"mds/front/Other/GitCommit最佳实践/index.md","filePath":"mds/front/Other/GitCommit最佳实践/index.md","lastUpdated":null}'),p={name:"mds/front/Other/GitCommit最佳实践/index.md"},t=e(`<p>安装规范化提交插件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm install -g commitizen cz-conventional-changelog</span></span></code></pre></div><p>配置插件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>echo &#39;{&quot;path&quot;: &quot;cz-conventional-changelog&quot;}&#39; &gt; ~/.czrc</span></span></code></pre></div><p>使用</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>git add .</span></span>
<span class="line"><span></span></span>
<span class="line"><span>git cz</span></span></code></pre></div><p>接下来会有6个步骤共你选择</p><p>feat: A new feature<br> fix: A bug fix<br> docs: Documentation only changes<br> style: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)<br> refactor: A code change that neither fixes a bug nor adds a feature<br> perf: A code change that improves performance<br> test: Adding missing tests or correcting existing tests</p><p>翻译过来就是</p><p>feat: 新功能<br> fix: 修复BUG<br> docs: 修改文档<br> style: 不影响代码含义的修改（留白、格式化、分号缺失等）<br> refactor: 既不修复错误也不增加功能的代码更改<br> perf: 改进性能的代码变更<br> test: 添加缺失的测试或纠正现有测试</p><p>根据你提交的内容选择一个就行，接下来要输入你的模块名称，前面的?表示这是一个可选项目，不想填请回车跳过</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>? What is the scope of this change (e.g. component or file name): (press enter to skip)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>docs</span></span></code></pre></div><p>接下来你要写一个简短的描述，如果你修复了某个issues，请在描述结尾加上（#issues_code），这样更友好。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Write a short, imperative tense description of the change (max 86 chars):</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>fix some bug(#1001)</span></span></code></pre></div><p>接下来就是一个更长的详细的描述，可选项，可以选择跳过</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>? Provide a longer description of the change: (press enter to skip)</span></span></code></pre></div><p>接下来就是关于破坏性更新的问题，可选项，可以选择跳过</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>? Are there any breaking changes? (y/N)</span></span></code></pre></div><p>接下来就是这一变更是否会影响任何开放的问题？(是/否），如果你选择是它将会自动关闭你Github的issues。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>? Does this change affect any open issues? (y/N)</span></span></code></pre></div><h2 id="husky-commitlint-提交校验" tabindex="-1">husky + commitlint 提交校验 <a class="header-anchor" href="#husky-commitlint-提交校验" aria-label="Permalink to &quot;husky + commitlint 提交校验&quot;">​</a></h2><p>安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm install husky --save-dev</span></span>
<span class="line"><span></span></span>
<span class="line"><span>npx husky install</span></span></code></pre></div><p>添加</p><p>npx husky add .husky/pre-commit &quot;npm test&quot;</p><p>commitlint 配置</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm install -g @commitlint/cli @commitlint/config-conventional</span></span>
<span class="line"><span></span></span>
<span class="line"><span>echo &quot;export default { </span></span>
<span class="line"><span>extends: [&#39;@commitlint/config-conventional&#39;] </span></span>
<span class="line"><span>}&quot; &gt; commitlint.config.js</span></span>
<span class="line"><span></span></span>
<span class="line"><span>npx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;</span></span></code></pre></div><p>测试</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>git add .</span></span>
<span class="line"><span>git commit -m &#39;xx&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>提示缺少 subject 就是提交信息、type 就是提交类型，按照规范提交就 ok 了</span></span></code></pre></div><h2 id="根据-commit-信息生成-changelog" tabindex="-1">根据 commit 信息生成 changelog <a class="header-anchor" href="#根据-commit-信息生成-changelog" aria-label="Permalink to &quot;根据 commit 信息生成 changelog&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm install standard-version --save-dev</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm run release</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>git push</span></span>
<span class="line"><span>git push --tags</span></span></code></pre></div><p>release指定版本</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 0.4.1</span></span>
<span class="line"><span>npm run release # 0.4.1 =&gt; 0.4.2</span></span>
<span class="line"><span>npm run release -- --prerelease # 0.4.2 to 0.4.3-0</span></span>
<span class="line"><span>npm run release # 0.4.3-0 to 0.4.3</span></span>
<span class="line"><span>npm run release -- --prerelease alpha # 0.4.3 to 0.4.4-alpha.0</span></span>
<span class="line"><span></span></span>
<span class="line"><span># patch、minor、major</span></span>
<span class="line"><span>npm run release -- --release-as minor  # 0.4.4-alpha.0 to 0.5.0</span></span>
<span class="line"><span>npm run release -- --release-as patch # 0.5.0 to 0.5.1</span></span>
<span class="line"><span>npm run release -- --release-as major # 0.5.1 to 1.0.0</span></span>
<span class="line"><span>npm run release -- --release-as prepatch # 1.0.0 to 1.0.1-0</span></span>
<span class="line"><span>npm run release -- --release-as preminor # 1.0.1-0 to 1.1.0-0</span></span>
<span class="line"><span>npm run release -- --release-as premajor # 1.1.0-0 to 2.0.0-0</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 手动指定版本</span></span>
<span class="line"><span>npm run release -- --release-as 2.1.3-alpha.1 # 2.0.0-0 to 2.1.3-alpha.1</span></span>
<span class="line"><span># ✔ bumping version in package.json from 2.0.0-0 to 2.1.3-alpha.1</span></span>
<span class="line"><span># ✔ bumping version in package-lock.json from 2.0.0-0 to 2.1.3-alpha.1</span></span>
<span class="line"><span># ✔ tagging release v2.1.3-alpha.1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>npm run release # 2.1.3-alpha.1 to 2.2.0</span></span></code></pre></div><p><a href="https://github.com/difffffft/commitizen-practice-demo" target="_blank" rel="noreferrer">demo: difffffft/commitizen-practice-demo</a></p><p><a href="https://www.bilibili.com/video/BV193411C7XE" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV193411C7XE</a></p>`,39),i=[t];function l(o,c,r,h,d,g){return n(),a("div",null,i)}const v=s(p,[["render",l]]);export{u as __pageData,v as default};
