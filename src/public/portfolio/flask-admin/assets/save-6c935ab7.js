import{f as _,r as d,o as q,A as K,n as t,b as o,l as k,k as s,q as E,F as g,E as F}from"./index-bf47055b.js";import{_ as R}from"./lodash-3ffe41b4.js";const G=p=>{const f=R.cloneDeep(p),n=_(R.cloneDeep(p));return{formData:n,formDataReset:()=>{for(let r in n.value)n.value[r]=f[r]},formDataAssign:r=>{for(let e in f){const i=r[e];i==null?n.value[e]=f[e]:n.value[e]=i}}}},h={__name:"save",props:{baseUrl:{type:String,required:!1}},emits:["refresh"],setup(p,{expose:f,emit:n}){const c=p,m=_(!1),r=_(),{formData:e,formDataAssign:i,formDataReset:y}=G({id:"",username:""}),U=_({username:[{required:!0,message:"姓名不能为空",trigger:"blur"}]}),w=u=>{m.value=!0,y(),u&&x(u)},x=u=>{g.get(c.baseUrl+"/"+u).then(l=>{i(l.data)})},b=()=>{r.value.validate(u=>{if(!u)return!1;(e.value.id?g.put(c.baseUrl,e.value):g.post(c.baseUrl,e.value)).then(()=>{F.success({message:"操作成功",duration:500,onClose:()=>{m.value=!1,n("refresh")}})})})};return f({show:w}),(u,l)=>{const D=d("el-input"),v=d("el-form-item"),C=d("BaseRadioGroup"),A=d("el-form"),V=d("el-button"),B=d("el-dialog");return q(),K(B,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=a=>m.value=a),title:s(e).id?"修改":"新增","close-on-click-modal":!1,draggable:""},{footer:t(()=>[o(V,{onClick:l[3]||(l[3]=a=>m.value=!1)},{default:t(()=>[k("取消")]),_:1}),o(V,{type:"primary",onClick:b},{default:t(()=>[k("确定")]),_:1})]),default:t(()=>[o(A,{ref_key:"formDataRef",ref:r,model:s(e),rules:U.value,"label-width":"120px",onKeyup:E(b,["enter"])},{default:t(()=>[o(v,{prop:"username",label:"用户名"},{default:t(()=>[o(D,{modelValue:s(e).username,"onUpdate:modelValue":l[0]||(l[0]=a=>s(e).username=a),placeholder:"用户名",autocomplete:"new-password"},null,8,["modelValue"])]),_:1}),o(v,{prop:"gender",label:"性别"},{default:t(()=>[o(C,{modelValue:s(e).gender,"onUpdate:modelValue":l[1]||(l[1]=a=>s(e).gender=a),"dict-type":"user_gender"},null,8,["modelValue"])]),_:1}),o(v,{prop:"email",label:"邮箱"},{default:t(()=>[o(D,{modelValue:s(e).email,"onUpdate:modelValue":l[2]||(l[2]=a=>s(e).email=a),placeholder:"邮箱"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","onKeyup"])]),_:1},8,["modelValue","title"])}}};export{h as default};
