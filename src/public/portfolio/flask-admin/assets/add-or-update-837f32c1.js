import{F as _,f as i,r as u,o as w,A as B,n as o,b as r,l as V,k as t,q as A,E as P}from"./index-bf47055b.js";import{u as $}from"./useRefFormData-84c825c7.js";import"./lodash-3ffe41b4.js";const E=m=>_.get("/sys/params/"+m),G=m=>m.id?_.put("/sys/params",m):_.post("/sys/params",m),D={__name:"add-or-update",emits:["refreshDataList"],setup(m,{expose:g,emit:b}){const p=i(!1),f=i(),{dataForm:l,assign:k,reset:c}=$({id:"",param_name:"",param_type:0,param_key:"",param_value:"",remark:""}),x=s=>{p.value=!0,c(),s&&R(s)},R=s=>{E(s).then(e=>{k(e.data)})},U=i({param_name:[{required:!0,message:"必填项不能为空",trigger:"blur"}],param_type:[{required:!0,message:"必填项不能为空",trigger:"blur"}],param_key:[{required:!0,message:"必填项不能为空",trigger:"blur"}],param_value:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),v=()=>{f.value.validate(s=>{if(!s)return!1;G(l.value).then(()=>{P.success({message:"操作成功",duration:500,onClose:()=>{p.value=!1,b("refreshDataList")}})})})};return g({init:x}),(s,e)=>{const d=u("el-input"),n=u("el-form-item"),q=u("BaseRadioGroup"),C=u("el-form"),y=u("el-button"),F=u("el-dialog");return w(),B(F,{modelValue:p.value,"onUpdate:modelValue":e[8]||(e[8]=a=>p.value=a),title:t(l).id?"修改":"新增","close-on-click-modal":!1,width:600},{footer:o(()=>[r(y,{onClick:e[6]||(e[6]=a=>p.value=!1)},{default:o(()=>[V("取消")]),_:1}),r(y,{type:"primary",onClick:e[7]||(e[7]=a=>v())},{default:o(()=>[V("确定")]),_:1})]),default:o(()=>[r(C,{ref_key:"dataFormRef",ref:f,model:t(l),rules:U.value,"label-width":"100px",onKeyup:e[5]||(e[5]=A(a=>v(),["enter"]))},{default:o(()=>[r(n,{label:"参数名称",prop:"param_name"},{default:o(()=>[r(d,{modelValue:t(l).param_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(l).param_name=a),placeholder:"参数名称"},null,8,["modelValue"])]),_:1}),r(n,{label:"参数键",prop:"param_key"},{default:o(()=>[r(d,{modelValue:t(l).param_key,"onUpdate:modelValue":e[1]||(e[1]=a=>t(l).param_key=a),placeholder:"参数键"},null,8,["modelValue"])]),_:1}),r(n,{label:"参数值",prop:"param_value"},{default:o(()=>[r(d,{modelValue:t(l).param_value,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).param_value=a),placeholder:"参数值"},null,8,["modelValue"])]),_:1}),r(n,{label:"备注",prop:"remark"},{default:o(()=>[r(d,{modelValue:t(l).remark,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).remark=a),placeholder:"备注"},null,8,["modelValue"])]),_:1}),r(n,{label:"系统参数",prop:"param_type"},{default:o(()=>[r(q,{modelValue:t(l).param_type,"onUpdate:modelValue":e[4]||(e[4]=a=>t(l).param_type=a),"dict-type":"params_type"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}};export{D as default};
