import{f as m,r as u,o as F,A as q,n as s,b as l,l as V,k as a,q as w,E as A}from"./index-bf47055b.js";import{u as D,a as P}from"./post-d3d1e315.js";import{u as $}from"./useRefFormData-84c825c7.js";import"./lodash-3ffe41b4.js";const H={__name:"add-or-update",emits:["refreshDataList"],setup(E,{expose:b,emit:g}){const r=m(!1),p=m(),{dataForm:o,assign:v,reset:c}=$({id:"",post_code:"",post_name:"",sort:0,status:1}),k=n=>{r.value=!0,c(),n&&x(n)},x=n=>{D(n).then(e=>{v(e.data)})},y=m({post_code:[{required:!0,message:"必填项不能为空",trigger:"blur"}],post_name:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),i=()=>{p.value.validate(n=>{if(!n)return!1;P(o.value).then(()=>{A.success({message:"操作成功",duration:500,onClose:()=>{r.value=!1,g("refreshDataList")}})})})};return b({init:k}),(n,e)=>{const f=u("el-input"),d=u("el-form-item"),R=u("el-input-number"),C=u("BaseRadioGroup"),U=u("el-form"),_=u("el-button"),B=u("el-dialog");return F(),q(B,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value=t),title:a(o).id?"修改":"新增","close-on-click-modal":!1,draggable:""},{footer:s(()=>[l(_,{onClick:e[5]||(e[5]=t=>r.value=!1)},{default:s(()=>[V("取消")]),_:1}),l(_,{type:"primary",onClick:e[6]||(e[6]=t=>i())},{default:s(()=>[V("确定")]),_:1})]),default:s(()=>[l(U,{ref_key:"dataFormRef",ref:p,model:a(o),rules:y.value,"label-width":"80px",onKeyup:e[4]||(e[4]=w(t=>i(),["enter"]))},{default:s(()=>[l(d,{label:"岗位编码",prop:"post_code"},{default:s(()=>[l(f,{modelValue:a(o).post_code,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).post_code=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"岗位名称",prop:"post_name"},{default:s(()=>[l(f,{modelValue:a(o).post_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).post_name=t)},null,8,["modelValue"])]),_:1}),l(d,{label:"排序",prop:"sort"},{default:s(()=>[l(R,{modelValue:a(o).sort,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).sort=t),min:0},null,8,["modelValue"])]),_:1}),l(d,{label:"状态",prop:"status"},{default:s(()=>[l(C,{modelValue:a(o).status,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).status=t),"dict-type":"post_status"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}};export{H as default};
