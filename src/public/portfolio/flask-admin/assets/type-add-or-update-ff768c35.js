import{f as p,r as d,o as b,A as V,n as r,b as t,l as m,k as a,m as T,Q as w,R as A,E as N}from"./index-bf47055b.js";import{u as Q}from"./useRefFormData-84c825c7.js";import"./lodash-3ffe41b4.js";const H={__name:"type-add-or-update",emits:["refreshDataList"],setup(S,{expose:g,emit:y}){const n=p(!1),_=p(),{dataForm:l,assign:v,reset:k}=Q({id:"",dict_type:"",dict_name:"",sort:0,dict_source:0,dict_sql:"",remark:""}),q=p({dict_type:[{required:!0,message:"必填项不能为空",trigger:"blur"}],dict_name:[{required:!0,message:"必填项不能为空",trigger:"blur"}],dict_source:[{required:!0,message:"必填项不能为空",trigger:"blur"}],dict_sql:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),x=u=>{n.value=!0,k(),u&&U(u)},U=u=>{w(u).then(e=>{v(e.data)})},C=()=>{_.value.validate(u=>{if(!u)return!1;A(l.value).then(()=>{N.success({message:"操作成功",duration:500,onClose:()=>{n.value=!1,y("refreshDataList")}})})})};return g({init:x}),(u,e)=>{const i=d("el-input"),s=d("el-form-item"),D=d("el-input-number"),c=d("el-radio-button"),R=d("el-radio-group"),F=d("el-form"),f=d("el-button"),L=d("el-dialog");return b(),V(L,{modelValue:n.value,"onUpdate:modelValue":e[8]||(e[8]=o=>n.value=o),title:a(l).id?"修改":"新增","close-on-click-modal":!1,draggable:""},{footer:r(()=>[t(f,{onClick:e[6]||(e[6]=o=>n.value=!1)},{default:r(()=>[m("取消")]),_:1}),t(f,{type:"primary",onClick:e[7]||(e[7]=o=>C())},{default:r(()=>[m("确定")]),_:1})]),default:r(()=>[t(F,{ref_key:"dataFormRef",ref:_,model:a(l),rules:q.value,"label-width":"80px"},{default:r(()=>[t(s,{prop:"dict_type",label:"字典类型"},{default:r(()=>[t(i,{modelValue:a(l).dict_type,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).dict_type=o),placeholder:"字典类型"},null,8,["modelValue"])]),_:1}),t(s,{prop:"dict_name",label:"字典名称"},{default:r(()=>[t(i,{modelValue:a(l).dict_name,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).dict_name=o),placeholder:"字典名称"},null,8,["modelValue"])]),_:1}),t(s,{prop:"sort",label:"排序"},{default:r(()=>[t(D,{modelValue:a(l).sort,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).sort=o),"controls-position":"right",min:0,label:"排序"},null,8,["modelValue"])]),_:1}),t(s,{prop:"remark",label:"备注"},{default:r(()=>[t(i,{modelValue:a(l).remark,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).remark=o),placeholder:"备注"},null,8,["modelValue"])]),_:1}),t(s,{label:"数据来源",prop:"dict_source"},{default:r(()=>[t(R,{modelValue:a(l).dict_source,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).dict_source=o)},{default:r(()=>[t(c,{label:0},{default:r(()=>[m("字典数据")]),_:1}),t(c,{label:1},{default:r(()=>[m("动态SQL")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l).dict_source===1?(b(),V(s,{key:0,prop:"dict_sql",label:"动态SQL"},{default:r(()=>[t(i,{modelValue:a(l).dict_sql,"onUpdate:modelValue":e[5]||(e[5]=o=>a(l).dict_sql=o),type:"textarea",placeholder:"如：select id as dict_value, name as dict_label from sys_role where deleted = 0"},null,8,["modelValue"])]),_:1})):T("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}};export{H as default};
