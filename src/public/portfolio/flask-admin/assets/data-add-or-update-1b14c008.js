import{f as _,r,o as i,A as f,n as t,b as o,l as m,k as s,q as E,c as L,M as N,N as $,t as V,O as K,P as M,E as S}from"./index-bf47055b.js";import{u as H}from"./useRefFormData-84c825c7.js";import"./lodash-3ffe41b4.js";const z={__name:"data-add-or-update",emits:["refreshDataList"],setup(O,{expose:y,emit:k}){const u=_(!1),b=_(),{dataForm:a,assign:D,reset:w}=H({id:"",dict_type_id:0,dict_label:"",dict_value:"",label_class:"",sort:0,remark:""}),x=_({dict_label:[{required:!0,message:"必填项不能为空",trigger:"blur"}],dict_value:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),U=n=>{u.value=!0,w(),n&&C(n)},C=n=>{K(n).then(l=>{D(l.data)})},c=()=>{b.value.validate(n=>{if(!n)return!1;M(a.value).then(()=>{S.success({message:"操作成功",duration:500,onClose:()=>{u.value=!1,k("refreshDataList")}})})})};return y({init:U,dataForm:a}),(n,l)=>{const p=r("el-input"),d=r("el-form-item"),v=r("el-tag"),F=r("el-option"),R=r("el-select"),q=r("el-input-number"),A=r("el-form"),g=r("el-button"),B=r("el-dialog");return i(),f(B,{modelValue:u.value,"onUpdate:modelValue":l[8]||(l[8]=e=>u.value=e),title:s(a).id?"修改":"新增",width:600,"close-on-click-modal":!1,draggable:""},{footer:t(()=>[o(g,{onClick:l[6]||(l[6]=e=>u.value=!1)},{default:t(()=>[m("取消")]),_:1}),o(g,{type:"primary",onClick:l[7]||(l[7]=e=>c())},{default:t(()=>[m("确定")]),_:1})]),default:t(()=>[o(A,{ref_key:"dataFormRef",ref:b,model:s(a),rules:x.value,"label-width":"80px",onKeyup:l[5]||(l[5]=E(e=>c(),["enter"]))},{default:t(()=>[o(d,{prop:"dict_value",label:"字典值"},{default:t(()=>[o(p,{modelValue:s(a).dict_value,"onUpdate:modelValue":l[0]||(l[0]=e=>s(a).dict_value=e),placeholder:"字典值"},null,8,["modelValue"])]),_:1}),o(d,{prop:"dict_label",label:"字典标签"},{default:t(()=>[o(p,{modelValue:s(a).dict_label,"onUpdate:modelValue":l[1]||(l[1]=e=>s(a).dict_label=e),placeholder:"字典标签"},null,8,["modelValue"])]),_:1}),o(d,{prop:"label_class",label:"标签样式"},{default:t(()=>[o(R,{modelValue:s(a).label_class,"onUpdate:modelValue":l[2]||(l[2]=e=>s(a).label_class=e),style:{width:"100%"},clearable:""},{default:t(()=>[(i(),L(N,null,$([{value:"primary",label:"primary"},{value:"success",label:"success"},{value:"info",label:"info"},{value:"warning",label:"warning"},{value:"danger",label:"danger"}],e=>o(F,{key:e.value,label:e.label,value:e.value},{default:t(()=>[e.value==="primary"?(i(),f(v,{key:0,style:{width:"100%"}},{default:t(()=>[m(V(e.label),1)]),_:2},1024)):(i(),f(v,{key:1,style:{width:"100%"},type:e.value},{default:t(()=>[m(V(e.label),1)]),_:2},1032,["type"]))]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(d,{prop:"sort",label:"排序"},{default:t(()=>[o(q,{modelValue:s(a).sort,"onUpdate:modelValue":l[3]||(l[3]=e=>s(a).sort=e),"controls-position":"right",min:0,label:"排序"},null,8,["modelValue"])]),_:1}),o(d,{prop:"remark",label:"备注"},{default:t(()=>[o(p,{modelValue:s(a).remark,"onUpdate:modelValue":l[4]||(l[4]=e=>s(a).remark=e),placeholder:"备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}};export{z as default};
