import{_ as K,G as T,f,r as l,H as V,o as d,A as i,n as e,b as t,k as n,q as A,l as s,w as _,m as G,s as E}from"./index-bf47055b.js";import J from"./add-or-update-cdb0df7c.js";import M from"./data-scope-d2feaa84.js";import P from"./user-df51f5b3.js";import"./role-bd3b5144.js";import"./useRefFormData-84c825c7.js";import"./lodash-3ffe41b4.js";import"./orgs-f0b7c58e.js";const Q=E({name:"SysRole"}),W=Object.assign(Q,{setup(X){const{state:r,getDataList:v,selectionChangeHandle:$,sizeChangeHandle:R,currentChangeHandle:H,deleteBatchHandle:w}=T({baseUrl:"/sys/role",queryForm:{name:""}}),h=f(),k=p=>{h.value.init(p)},b=f(),g=f(!1),x=f(),z=f(),L=(p,a)=>{p==="dataScope"?b.value.init(a.id):p==="user"&&(x.value=a.id,z.value="分配用户 - "+a.name,g.value=!0)};return(p,a)=>{const U=l("el-input"),y=l("el-form-item"),u=l("el-button"),q=l("el-form"),m=l("el-table-column"),S=l("el-dropdown-item"),D=l("el-dropdown-menu"),F=l("el-dropdown"),O=l("el-table"),B=l("el-pagination"),N=l("el-drawer"),j=l("el-card"),c=V("auth"),I=V("loading");return d(),i(j,null,{default:e(()=>[t(q,{inline:!0,model:n(r).queryForm,onKeyup:a[4]||(a[4]=A(o=>n(v)(),["enter"]))},{default:e(()=>[t(y,null,{default:e(()=>[t(U,{modelValue:n(r).queryForm.name,"onUpdate:modelValue":a[0]||(a[0]=o=>n(r).queryForm.name=o),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),t(y,null,{default:e(()=>[t(u,{onClick:a[1]||(a[1]=o=>n(v)())},{default:e(()=>[s("查询")]),_:1})]),_:1}),t(y,null,{default:e(()=>[_((d(),i(u,{type:"primary",onClick:a[2]||(a[2]=o=>k())},{default:e(()=>[s("新增")]),_:1})),[[c,"sys:role:save"]])]),_:1}),t(y,null,{default:e(()=>[_((d(),i(u,{type:"danger",onClick:a[3]||(a[3]=o=>n(w)())},{default:e(()=>[s("删除")]),_:1})),[[c,"sys:role:delete"]])]),_:1})]),_:1},8,["model"]),_((d(),i(O,{data:n(r).dataList,border:"",style:{width:"100%"},onSelectionChange:n($)},{default:e(()=>[t(m,{type:"selection","header-align":"center",align:"center",width:"50"}),t(m,{prop:"name",label:"名称","header-align":"center",align:"center"}),t(m,{prop:"remark",label:"备注","header-align":"center",align:"center"}),t(m,{prop:"create_time",label:"创建时间","header-align":"center",align:"center",width:"180"}),t(m,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"200"},{default:e(o=>[_((d(),i(u,{type:"primary",link:"",onClick:C=>k(o.row.id)},{default:e(()=>[s("修改 ")]),_:2},1032,["onClick"])),[[c,"sys:role:update"]]),_((d(),i(u,{type:"primary",link:"",onClick:C=>n(w)(o.row.id)},{default:e(()=>[s("删除 ")]),_:2},1032,["onClick"])),[[c,"sys:role:delete"]]),_((d(),i(F,{onCommand:C=>L(C,o.row)},{dropdown:e(()=>[t(D,null,{default:e(()=>[t(S,{command:"dataScope"},{default:e(()=>[s("数据权限")]),_:1}),t(S,{command:"user"},{default:e(()=>[s("分配用户")]),_:1})]),_:1})]),default:e(()=>[t(u,{type:"primary",class:"el-dropdown-link",link:""},{default:e(()=>[s("更多")]),_:1})]),_:2},1032,["onCommand"])),[[c,"sys:role:update"]])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[I,n(r).dataListLoading]]),t(B,{"current-page":n(r).page,"page-sizes":n(r).pageSizes,"page-size":n(r).limit,total:n(r).total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:n(R),onCurrentChange:n(H)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),t(J,{ref_key:"addOrUpdateRef",ref:h,onRefreshDataList:n(v)},null,8,["onRefreshDataList"]),t(M,{ref_key:"dataScopeRef",ref:b},null,512),g.value?(d(),i(N,{key:0,modelValue:g.value,"onUpdate:modelValue":a[5]||(a[5]=o=>g.value=o),title:z.value,size:1e3,"close-on-press-escape":!1},{default:e(()=>[t(P,{"role-id":x.value},null,8,["role-id"])]),_:1},8,["modelValue","title"])):G("",!0)]),_:1})}}}),re=K(W,[["__scopeId","data-v-e59ecae6"]]);export{re as default};
