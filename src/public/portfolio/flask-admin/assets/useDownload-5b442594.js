import{u as f,a1 as b,a2 as g,E as m}from"./index-bf47055b.js";const U=({url:s,data:c={},method:a="POST",loading:n=!0})=>{const l=f(),r=b.create({baseURL:"http://43.143.249.23:8080",timeout:6e4,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:l.token},responseType:"blob"});function i(t,e){const o=document.createElement("a");o.download=t,o.href=e,o.click()}return async()=>{let t=null;n&&(t=g.service({fullscreen:!0,background:"rgba(0,0,0,0.8)",text:"下载中..."}));try{let e=null;(a==="POST"||a==="post")&&(e=await r.post(s,c)),(a==="GET"||a==="get")&&(e=await r.get(s));const o=new Blob([e.data]),u=window.URL.createObjectURL(o),p="attachment; filename=",d=e.headers["content-disposition"].split(p)[1];i(decodeURIComponent(d),u)}catch(e){console.error(e),e.message&&m.error(e.message)}finally{n&&t&&t.close()}}};export{U as u};
